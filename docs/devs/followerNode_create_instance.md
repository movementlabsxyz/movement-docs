---
sidebar_position: 8
---

# Create a Follower Node Instance

This guide will help you to create a Movement follower node instance. To configure it and run it use this [guide](followerNode_configure.md.md). The Bardock Testnet and Mainnet currently support this feature. Learn more about Node architecture [here](/general/Mainnet/node_level_architecture). For simplicity we have provided instructions for deploying using an Ansible script below. 

## Hardware Recommendations

- 32 cores
- 64 GB RAM
- 2 TB SSD w/ 60K IOPS and 200 MiB/s throughput


## Creation

### Clone Movement Repository 

```bash

git clone https://github.com/movementlabsxyz/movement
cd movement
git checkout ac7a5db417ceb55803073b5be614ceb0549e8dc7

```

### Example of AWS Instance

Create a AWS instance of type `c5.4xlarge` with at least 1Tb (best 4Tb) of disk of type io2 and 32000 IOPS preferably in `us-west-1` region. 


### Current Container Revision

The current container revision to use is:

 - Mainnet: `d963665`
 - Testnet: `d963665`


### Sample Deployment Scripts

#### Mainnet

```bash
ansible-playbook --inventory <inventory_url>, \
    --user <user>  \
    --extra-vars "movement_container_version=d963665" \
    --extra-vars "user=<user>" \
    docs/movement-node/run/ansible/follower-node/mainnet/movement-full-follower.yml \
    --private-key <instance_pem_file>

```

:::info
Please generate a private key through your cloud provider. The example scripts use a PEM file generated by AWS.
:::

Replace the following:

- **`<inventory_url>`**: The URL or IP of your inventory.
- **`<user>`**: Your username.
- **`<pem_file>`**: Your instance private key file.

Example for AWS and mainnet:

```bash
ansible-playbook --inventory ec2-18-144-5-233.us-west-1.compute.amazonaws.com, \
    --user rahat  \
    --extra-vars "movement_container_version=d963665" \
    --extra-vars "user=rahat" \
    docs/movement-node/run/ansible/follower-node/mainnet/movement-full-follower.yml \
    --private-key rahat_deployment_test.pem

```

#### Bardock Testnet

For Bardock Testnet, please use the following example:

```bash

ansible-playbook --inventory ec2-18-144-5-233.us-west-1.compute.amazonaws.com, \
    --user rahat  \
    --extra-vars "movement_container_version=d963665" \
    --extra-vars "user=rahat" \
    docs/movement-node/run/ansible/follower-node/testnet/movement-full-follower.yml \
    --private-key rahat_deployment_test.pem

```

#### After installation

If the service doesn't start, often it's because the config.json file hasn't been created correctly.

To solve the issue replace the provided [config.json](config.json) in the $HOME/.movement folder and start the service with the command:

```bash
systemctl start movement-full-follower.service 

```

### Verify Deployment

- Connect to your instance (in the above example I ssh into my instance)
- run the command **`curl localhost:30731/v1`**
- Output should be similar to this:

```json

{"chain_id":126,"epoch":"1","ledger_version":"9","oldest_ledger_version":"0","ledger_timestamp":"1732636319660843","node_role":"validator","oldest_block_height":"0","block_height":"3","git_hash":"9dfc8e7a3d622597dfd81cc4ba480a5377f87a"}

```

Compare to: 

- Mainnet endpoint: https://mainnet.movementnetwork.xyz/v1
- Testnet endpoint: https://aptos.testnet.bardock.movementlabs.xyz/v1

## Run Locally 

It is easiest to gain quick familiarity with the Movement Follower Node by running it locally.

To do this, ensure you have nix installed. We recommend the Determinate Systems nix installation script. You can find it [here](https://determinate.systems/posts/determinate-nix-installer/).

```bash

curl --proto '=https' --tlsv1.2 -sSf -L https://install.determinate.systems/nix | sh -s -- install

```

After installing `nix`, clone the Movement repository and open the `nix-shell` environment.

```bash

# if you have not cloned the repository yet
git clone https://github.com/movementlabsxyz/movement
cd movement
git checkout 6e00b778ee7d8139b153aa4eb80805aead07e252
nix develop

```

This should install all dependencies needed to work on the Movement Follower Node.

You can now either run the follower node natively or with our containers via the provided just commands.

First create, an environment file for the follower node. The example below is for the Movement Testnet Bardock. Comments are made on how to change the environment file for other networks.

```
CONTAINER_REV=6e00b778ee7d8139b153aa4eb80805aead07e252
DOT_MOVEMENT_PATH=./.movement
MAPTOS_CHAIN_ID=250 # change this to the chain id of the network you are running
MOVEMENT_DA_LIGHT_NODE_CONNECTION_PROTOCOL=https
MOVEMENT_DA_LIGHT_NODE_CONNECTION_HOSTNAME="m1-da-light-node.testnet.bardock.movementnetwork.xyz" # change this to the hostname of the Movement DA Light Node service on network you are running
MOVEMENT_DA_LIGHT_NODE_CONNECTION_PORT=443
```

To run natively you can use the following command:

```bash

source .env
just movement-full-node native build.setup.follower -t=false

```

To run with containers you can use the following command:

```bash

just movement-full-node docker-compose follower

```

To check on the status of the service under either runner, run:

```bash

curl localhost:30731/v1

```

You should see a ledger_version field CLOSE to the other values on the network, e.g., https://aptos.testnet.bardock.movementlabs.xyz/v1.