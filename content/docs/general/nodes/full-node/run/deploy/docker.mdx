---
title: "Using Docker"
description: "Deploy a public fullnode (PFN) using Docker containers with automated configuration download and container setup for x86-64 systems."
sidebar:
  label: "Docker"
---

This section describes how to configure and run your PFN using Docker. You can either use pre-built Docker images or build your own from source.

<Callout type="warning">
**Supported only on x86-64 CPUs**<br />
Running aptos-core via Docker is currently only supported on x86-64 CPUs. If you have an Apple M1/M2 (ARM64) Mac, use
the aptos-core source code approach (above). If M1/M2 support is important to you, comment on this
issue: https://github.com/aptos-labs/aptos-core/issues/1412
</Callout>

If you prefer to use the official pre-built images, follow these steps:

1. First, install [Docker](https://docs.docker.com/get-docker/).
2. Next, run the following script to prepare your local configuration and data directory for mainnet. This will
   download the `fullnode.yaml` configuration file, the `genesis.blob` and `waypoint.txt` files for your PFN, and
   create a `data` directory to store the blockchain database:

```shellscript filename="Terminal"
mkdir testnet && cd testnet
mkdir data && \
curl -O https://raw.githubusercontent.com/movementlabsxyz/aptos-core/movement/docker/compose/aptos-node/fullnode.yaml && \
curl -O https://raw.githubusercontent.com/movementlabsxyz/movement-networks/main/testnet/waypoint.txt && \
curl -O https://raw.githubusercontent.com/movementlabsxyz/movement-networks/main/testnet/genesis.blob
```

<Callout type="warning">
**Don't want to connect to testnet?**<br />
To connect to other networks (e.g., `devnet` and `mainnet`), you can find the genesis and waypoint here âžœ https://github.com/movementlabsxyz/movement-networks.
Be sure to download the `genesis.blob` and `waypoint.txt` for those networks, instead of using the genesis
and waypoint pointed to by the `curl` commands above.
</Callout>

3. Next, make sure that the `fullnode.yaml` configuration file that you downloaded above contains only the following content.
   This will ensure that this configuration is for a PFN and not for another node type (e.g., validator or VFN):

```yaml filename="fullnode.yaml"
base:
  role: "full_node"
  data_dir: "/opt/aptos/data"
  waypoint:
    from_file: "/opt/aptos/genesis/waypoint.txt"

execution:
  genesis_file_location: "/opt/aptos/genesis/genesis.blob"
  genesis_waypoint:
    from_file: "/opt/aptos/genesis/genesis_waypoint.txt"

storage:
  rocksdb_configs:
    enable_storage_sharding: false

full_node_networks:
  - network_id: "public"
    discovery_method: "none"
    listen_address: "/ip4/0.0.0.0/tcp/6182"
    seeds:
      9967EBF40AC8C2CCB38709488952DA1826176584EA3067B63B1695362ECB3D1F:
        addresses:
        - "/dns/testnet.movementnetwork.xyz/tcp/6182/noise-ik/9967EBF40AC8C2CCB38709488952DA1826176584EA3067B63B1695362ECB3D1F/handshake/0"
        role: "Upstream"

api:
  enabled: true
  address: 0.0.0.0:8080 

state_sync:
  state_sync_driver:
    bootstrapping_mode: DownloadLatestStates
    continuous_syncing_mode: ApplyTransactionOutputs
```

<Callout type="warning">
**Don't want to allow inbound connections?** <br />
Override the following if you do not want other PFNs connecting to yours: `listen_address: "/ip4/127.0.0.1/tcp/6182"`.
</Callout>

4. Next, run the following `docker` command:

```shellscript filename="Terminal"
docker run --pull=always \
  --rm -p 8080:8080 \
  -p 9101:9101 -p 6180:6180 \
  -v $(pwd):/opt/aptos/etc -v $(pwd)/data:/opt/aptos/data \
  --workdir /opt/aptos/etc \
  --name=aptos-fullnode ghcr.io/movementlabsxyz/aptos-node:latest aptos-node \
  -f /opt/aptos/etc/fullnode.yaml
```

<Callout type="warning">
**Sudo access**<br />
Note: you may need to prefix the docker command with `sudo` depending on your configuration.
</Callout>

<Callout type="info">
**Docker tags**<br />
The `latest` tag always refers to the latest official Docker image tag. You can find the latest hash for comparison at:
https://github.com/movementlabsxyz/movement-networks/tree/main/testnet
</Callout>

You have now successfully configured and started running a PFN in the Aptos mainnet.

<Callout type="info">
**Verify your PFN**
If you want to verify that your PFN is running correctly, you can follow the instructions in the [Verify a PFN](/network/nodes/full-node/verify-pfn) guide.
</Callout>